
openapi: 3.0.3
info:
  title: Metro App Revamp
  description: This is our CS203 Assignment 2, to revamp/redesign the Metro.co.nz app for mobile and desktop use
  contact:
    email: 270188817@yoobeestudents.ac.nz
  version: 1.0.0
servers:
  - url: "http://127.0.0.1:5000"
tags:
  - name: User
    description: Everything about Metro users
paths:
  /register:
    post:
      tags:
        - User
      summary: Create a new Metro account
      description: Create a new user record to hold their id, username, email and password in the db
      operationId: register
      requestBody:
        description: Creating a new user
        content: 
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
        required: true
      responses:
        '201':
          description: "Success"
        '400':
          description: "Bad request"
          content:
            application/json:
              schema:
                oneOf:
                 - $ref: '#/components/schemas/Error'
                 - $ref: '#/components/schemas/ERROR_USERNAME'
                 - $ref: '#/components/schemas/ERROR_EMAIL'
                 - $ref: '#/components/schemas/ERROR_PASS'
                 - $ref: '#/components/schemas/ERROR_NAME_TAKEN'
                 - $ref: '#/components/schemas/ERROR_MISSING_INFO'

components:
  schemas:
    UserRegistration:
      type: object
      required:
        - username
        - email
        - password
      properties:
        id:
          type: integer
          format: int64
          example: 10
        username:
          type: string
          description: user', username
          example: jonnyjim
        email:
          type: string
          description: user's contact email address
          example: jonny@gmail.com
        password:
          type: string
          description: user's password
          example: password123
    Error:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
    ERROR_USERNAME:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
    ERROR_EMAIL:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
    ERROR_PASS:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
    ERROR_NAME_TAKEN:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
    ERROR_MISSING_INFO:
      type: object
      properties:
        err_id:
          type: integer
        err_msg:
          type: string
          
        